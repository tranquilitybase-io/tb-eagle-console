<div class="actions-top-bar">
  <mat-form-field>
    <mat-label>Filter</mat-label>
    <input
      matInput
      (keyup)="applyFilter($event)"
      [(ngModel)]="filterValue"
      placeholder="Ex. Activator name or description"
    />
  </mat-form-field>
</div>
<div class="mat-elevation-z8" [ngStyle]="{ overflow: 'auto' }">
  <table mat-table [dataSource]="dataSource" matSort>
    <div class="activ-dpl-head-desc">
      <div class="activ-dpl-head-title">Activator</div>
      <app-icon icon="expand_arrow" [size]="10"></app-icon>
    </div>

    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
      <td mat-cell *matCellDef="let row">{{ row.id }}</td>
    </ng-container>

    <!-- Activator Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header="name">Activator</th>
      <td mat-cell class="mat-cell-left-aligned" *matCellDef="let row">{{ row.activatorMetadata.name }}</td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="category">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color">{{ row.activatorMetadata.category }}</td>
    </ng-container>

    <!-- Type Column -->
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color">{{ row.activatorMetadata.type.value }}</td>
    </ng-container>

    <!-- Data sensitivity Column -->
    <ng-container matColumnDef="sensitivity">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Data sensitiviy</th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color">{{ row.sensitivity }}</td>
    </ng-container>

    <!-- Environments Column -->
    <ng-container matColumnDef="environments">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Environments</th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color">{{ row.envs.length }}</td>
    </ng-container>

    <!-- Cloud platforms Column -->
    <ng-container matColumnDef="cloudPlatforms">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Cloud platforms</th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color">{{ row.activatorMetadata.platforms.length }}</td>
    </ng-container>

    <!-- Last updated Column -->
    <ng-container matColumnDef="lastUpdated">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Last updated</th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color">{{ row.lastUpdated }}</td>
    </ng-container>

    <!-- Description Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td
        mat-cell
        title="{{ row.activatorMetadata.description }}"
        class="mat-cell-left-aligned truncate-text"
        *matCellDef="let row"
        [style.color]="row.color"
      >
        {{ row.activatorMetadata.description }}
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell class="nowrap" *matCellDef="let row" [style.color]="row.color">
        <a
          mat-icon-button
          matTooltip="View activator"
          routerLink="/mission-control/activator-store/view"
          [queryParams]="{ id: row.id }"
        >
          <mat-icon aria-hidden="false" aria-label="View activator icon">remove_red_eye</mat-icon>
        </a>
        <a
          mat-icon-button
          matTooltip="Add to solution"
          routerLink="/mission-control/activator-store/create-app"
          [queryParams]="{ id: row.id }"
        >
          <mat-icon aria-hidden="false" aria-label="Add to solution icon">send</mat-icon>
        </a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>
