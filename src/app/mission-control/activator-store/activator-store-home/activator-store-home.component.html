<div *ngIf="isSelectedSolution$ | async; else standardHeader">
  <header>
    <app-breadcrumbs
      [steps]="[
        {
          name: 'Solutions',
          link: '/mission-control/solutions'
        },
        {
          name: (selectedSolution$ | async).name,
          link: '/mission-control/solutions/view',
          id: (selectedSolution$ | async).id
        },
        {
          name: 'Create new application'
        }
      ]"
    ></app-breadcrumbs>
  </header>
</div>
<ng-template #standardHeader>
  <header>
    <app-breadcrumbs></app-breadcrumbs>
  </header>
</ng-template>

<mat-horizontal-stepper *ngIf="isSelectedSolution$ | async" [linear]="true" #stepper>
  <mat-step [completed]="false" state="done">
    <ng-template matStepLabel>Activator selection</ng-template>
  </mat-step>
  <mat-step [completed]="false" [editable]="false">
    <ng-template matStepLabel>Application details</ng-template>
    <!-- <app-applications-create #appCreate></app-applications-create> -->
  </mat-step>
  <mat-step [completed]="false" [editable]="false">
    <ng-template matStepLabel>Review</ng-template>
    <!-- <app-applications-create #appCreate></app-applications-create> -->
  </mat-step>

  <ng-template matStepperIcon="edit">
    <mat-icon>file_copy</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="done">
    <mat-icon>done</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="app-progress-item">
    <mat-icon fontSet="material-icons-outlined">file_copy</mat-icon>
  </ng-template>
</mat-horizontal-stepper>

<div class="controls-activator-home">
  <div class="switches-activator-home">
    <button
      mat-flat-button
      [color]="(categorySwitch$ | async) === 'Category' && 'primary'"
      (click)="onSwitch('Category')"
    >
      Category
      <span class="count">({{ categoriesCount$ | async }})</span>
    </button>
    <button
      *ngIf="!((categorySwitch$ | async) === 'All' || (categorySwitch$ | async) === 'Category')"
      mat-flat-button
      color="primary"
    >
      {{ categorySwitch$ | async }}
      <span class="count">({{ activatorsCount$ | async }})</span>
    </button>
    <button
      *ngIf="(categorySwitch$ | async) === 'All' || (categorySwitch$ | async) === 'Category'"
      mat-flat-button
      [color]="(categorySwitch$ | async) === 'All' && 'primary'"
      (click)="onSwitch('All')"
    >
      All
      <span class="count">({{ activatorsCount$ | async }})</span>
    </button>
  </div>
  <div class="flex-filler" *ngIf="(categorySwitch$ | async) === 'Category'"></div>
  <app-pills
    [pills]="['Type', 'Availability', 'Environment']"
    class="separated"
    *ngIf="(categorySwitch$ | async) !== 'Category'"
  ></app-pills>
  <app-search class="separated"></app-search>
  <app-grid-view-switch class="separated"></app-grid-view-switch>
</div>

<app-activator-store-home-grid
  *ngIf="(categorySwitch$ | async) !== 'Category'"
  class="grid-container"
></app-activator-store-home-grid>

<app-activator-store-home-category-grid
  *ngIf="(categorySwitch$ | async) === 'Category'"
  class="grid-container"
></app-activator-store-home-category-grid>
